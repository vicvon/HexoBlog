---
title: IO就绪条件
date: 2017-10-10 11:45:39
tags:
categories: network
---
### I/O事件就绪条件
- 套接字可读
    1. 套接字接收缓冲区中的数据字节数大于等于套接字接收缓冲区低水位标记的当前大小。
    2. 连接的读半部关闭(也就是接收到了FIN)，读套接字会返回0。
    3. 监听套接字有新的连接，accept此时不会阻塞。
    4. 套接字有错误没处理，读该套接字会返回-1。
- 套接字可写
    1. 套接字发送缓冲区中的可用空间字节数大于等于套接字发送缓冲区低水位标记的当前大小，并且或者该套接字已连接，或者该套接字不需要连接(UDP)。
    2. 套接字的写半部关闭，继续写将发生SIGPIPE信号。
    3. 使用非阻塞式的connect的套接字已建立连接，或者connect已经以失败告终。
    4. 套接字有错误没处理，写该套接字会返回-1。

如果某个套接字发生错误，那么它即可读也可写。